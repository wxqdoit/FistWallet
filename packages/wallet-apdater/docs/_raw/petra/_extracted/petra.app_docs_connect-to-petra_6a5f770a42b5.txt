[LI] Petra WebIntroduction
[LI] Frequently Asked Questions
[LI] Developer's GuideQuick Start
[LI] Error Codes
[LI] Telegram
[LI] Sign In with Aptos
[LI] Petra VaultIntroduction
[LI] GuidesCreate a Vault
[LI] Transaction Management
[LI] Publish a Contract
[LI] Backup your Vaults
[LI] Earn
[LI] DevelopersAccounts Types
[LI] Connecting to Petra Wallet
[LI] Deep Linking to Mobile App
[LI] Event Listening
[LI] Identifying Errors
[LI] Sending a Transaction
[LI] Signing Messages
[LI] Using Petra
[LI] Frequently Asked Questions
[P] On This Page
[LI] Installing Petra
[LI] Connecting to Petra
[LI] Disconnecting Petra
[H1] Connecting to Petra
[CODE] To use Petra with your dApp, your users must first install the Petra Chrome extension (opens in a new tab) in their browser. Petra injects an aptos
[P] To check if the user has installed Petra, perform the below check:
[CODE] const isPetraInstalled = window.aptos;
[P] If Petra is not installed, you can prompt the user to first install Petra and
provide the below installation instructions. For example, see below:
[CODE] const getAptosWallet = () => {
  if ('aptos' in window) {
    return window.aptos;
  } else {
    window.open('https://petra.app/', `_blank`);
  }
};
[H2] Installing Petra
[P] To install Petra on your Chrome browser, download the latest stable version from the Chrome Web Store (opens in a new tab).
[H2] Connecting to Petra
[CODE] After confirming that the web app has the aptos
[CODE] wallet.connect()
[CODE] When you call wallet.connect()
[CODE] address
[CODE] public key
[P] See the example code below:
[CODE] const wallet = getAptosWallet();
try {
  const response = await wallet.connect();
  console.log(response); // { address: string, address: string }
 
  const account = await wallet.account();
  console.log(account); // { address: string, address: string }
} catch (error) {
  // { code: 4001, message: "User rejected the request."}
}
[P] NOTE: After the user has approved the connnection for the first time, the web app's domain will be remembered for the future sessions.
[H2] Disconnecting Petra
[CODE] When you want the web app to forget about the connection status with Petra, you can do this by calling wallet.disconnect()
[CODE] await wallet.disconnect();
[P] NOTE: After disconnecting, the web app must reconnect to Petra to make requests.